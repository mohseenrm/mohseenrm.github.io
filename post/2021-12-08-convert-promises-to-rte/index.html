<html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=icon href=/images/favicon.svg><link rel=stylesheet href=/scss/global.min.c6e799be450052ebb6c2236c7a484e7dfc60256a0af456219d997f7d12dfe91e.css><link rel=stylesheet href=/css/prism.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css?family=Merriweather&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,wght@0,200;0,300;0,400;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,600;1,700;1,800;1,900&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel=stylesheet><link rel=stylesheet href=https://use.typekit.net/yka3uyp.css><title>Convert Promises to ReaderTaskEithers | Mohseen</title><meta name=description content="Making Promises Functional
Hey folks, this is a quick overview on how to make promises functional in fp-ts. If you&rsquo;re new to fp-ts would highly recommend reading the fp-ts guide to get more familiar with the library. Before we delve into why fp-ts, and why promises are a pain to get port onto fp-ts, wanted to first walk through why functional paradigm is a good option in the first place.
There is a heavy debate between Functional and OOP for decades with functional being more in vogue lately, but there are true benefits from having well tested and pure
functional code even in the most monolithic of applications."><meta property="og:title" content="Convert Promises to ReaderTaskEithers | Mohseen"><meta property="og:site_name" content="Mohseen"><meta property="og:description" content="Making Promises Functional
Hey folks, this is a quick overview on how to make promises functional in fp-ts. If you&rsquo;re new to fp-ts would highly recommend reading the fp-ts guide to get more familiar with the library. Before we delve into why fp-ts, and why promises are a pain to get port onto fp-ts, wanted to first walk through why functional paradigm is a good option in the first place.
There is a heavy debate between Functional and OOP for decades with functional being more in vogue lately, but there are true benefits from having well tested and pure
functional code even in the most monolithic of applications."><meta property="og:url" content="https://www.mohseen.dev/post/2021-12-08-convert-promises-to-rte/"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:image" content><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Convert Promises to ReaderTaskEithers | Mohseen"><link rel=canonical href=https://www.mohseen.dev/post/2021-12-08-convert-promises-to-rte/><meta name=twitter:description content="Making Promises Functional
Hey folks, this is a quick overview on how to make promises functional in fp-ts. If you&rsquo;re new to fp-ts would highly recommend reading the fp-ts guide to get more familiar with the library. Before we delve into why fp-ts, and why promises are a pain to get port onto fp-ts, wanted to first walk through why functional paradigm is a good option in the first place.
There is a heavy debate between Functional and OOP for decades with functional being more in vogue lately, but there are true benefits from having well tested and pure
functional code even in the most monolithic of applications."><meta name=twitter:image content><meta property="article:published_time" content="2021-12-08T18:58:10-08:00"><meta property="article:updated_time" content="2021-12-08T18:58:10-08:00"><script>!function(e,t){var n,s,o,i;t.__SV||window.posthog&&window.posthog.__loaded||(window.posthog=t,t._i=[],t.init=function(a,r,c){function d(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(n=e.createElement("script")).type="text/javascript",n.crossOrigin="anonymous",n.async=!0,n.src=r.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(i=e.getElementsByTagName("script")[0]).parentNode.insertBefore(n,i);var l=t;for(0[0]!==c?l=t[c]=[]:c="posthog",l.people=l.people||[],l.toString=function(e){var t="posthog";return"posthog"!==c&&(t+="."+c),e||(t+=" (stub)"),t},l.people.toString=function(){return l.toString(1)+".people (stub)"},o="init zr Wr fi Br Gr ci Nr Hr capture Ui calculateEventProperties Kr register register_once register_for_session unregister unregister_for_session Zr getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey cancelPendingSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Xr Jr createPersonProfile Qr jr ts opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing Vr debug O Yr getPageViewId captureTraceFeedback captureTraceMetric Or".split(" "),s=0;s<o.length;s++)d(l,o[s]);t._i.push([a,r,c])},t.__SV=1)}(document,window.posthog||[]),posthog.init("phc_7VXw62ISIZtl3a8eOqKYVitbXhTwd5COoeVDj5pkpU5",{api_host:"https://us.i.posthog.com",defaults:"2025-11-30",person_profiles:"always"})</script></head><body class=line-numbers><script src=/js/initColors.js></script><div class=layout-styled><section class=section><div class=nav-container><a class=logo-link href=/><div class=logo><svg viewBox="0 0 767.42 894.15"><path id="first-m" fill="#1ee3cf" d="m301.64 485.72-85.91-166.86v122.29l83.17 167.52c9.36 18.77 36.24 18.64 45.4-.25l9-18.58zm282.07 44.29V798.7a25.27 25.27.0 1050.54.0V425.52zM625.08 9.15a31.28 31.28.0 00-50 8L385.9 393.31l32.2 62.5 155.1-320.6a5.54 5.54.0 0110.53 2.42v128.4l50.54-100.47V31.22a30.86 30.86.0 00-9.19-22.07zM60.33 16.91A31.29 31.29.0 0032.52.0h-1.24A31.26 31.26.0 000 31.22V798.7a25.3 25.3.0 0025.27 25.27h1a25.3 25.3.0 0025.27-25.27V133.97a5.55 5.55.0 0110.53-2.41l40.08 80.77V101.39c0-1 0-2 .06-3z"/><path id="second-m" fill="#d1d3d4" d="M767.42 101.42v767.46a25.27 25.27.0 01-25.27 25.27 25.26 25.26.0 01-25.25-25.27V207.82a5.55 5.55.0 00-10.55-2.41L477.4 678.6c-9.15 18.91-36 19-45.38.23L195.27 201.72a5.55 5.55.0 00-10.52 2.43v664.7a25.27 25.27.0 01-25.27 25.3h-1a25.27 25.27.0 01-25.27-25.27V101.42a31.26 31.26.0 0131.23-31.27h1.24a31.27 31.27.0 0127.8 17l254.77 494.87a6.3 6.3.0 0011.22.0l248.76-494.6a31.26 31.26.0 0127.93-17.27 31.26 31.26.0 0131.26 31.27z"/></svg></div><span class=header-hidden>Navigate back to the homepage</span></a><div class=nav-controls><button id=copyButton class=icon-wrapper>
<svg class="icon-image" width="24" height="20" viewBox="0 0 24 20" fill="none"><path fillRule="evenodd" clipRule="evenodd" d="M2 5C2 3.34328 3.34328 2 5 2h9c1.6567.0 3 1.34328 3 3V9c0 1.6567-1.3433 3-3 3H10C9.44771 12 9 12.4477 9 13S9.44771 14 10 14h4c2.7613.0 5-2.2387 5-5V5c0-2.76128-2.2387-5-5-5H5C2.23872.0.0 2.23872.0 5V9c0 1.4938.656313 2.8361 1.6935 3.7509C2.10768 13.1163 2.73961 13.0767 3.10494 12.6625 3.47028 12.2483 3.43068 11.6164 3.0165 11.2511 2.39169 10.6999 2 9.89621 2 9V5zm5 6c0-1.65672 1.34328-3 3-3h4C14.5523 8 15 7.55228 15 7S14.5523 6 14 6H10C7.23872 6 5 8.23872 5 11v4c0 2.7613 2.23872 5 5 5h9c2.7613.0 5-2.2387 5-5V11C24 9.50621 23.3437 8.16393 22.3065 7.24906 21.8923 6.88372 21.2604 6.92332 20.8951 7.3375 20.5297 7.75168 20.5693 8.38361 20.9835 8.74894 21.6083 9.30007 22 10.1038 22 11v4c0 1.6567-1.3433 3-3 3H10c-1.65672.0-3-1.3433-3-3V11z" fill="#000"/></svg><div id=toolTip class=tool-tip>copied</div><input id=copyText style=opacity:0 type=text class=tool-tip>
</button>
<button id=themeColorButton class=icon-wrapper><div id=sunRays class=sun-rays></div><div id=moonOrSun class=moon-or-sun></div><div id=moonMask class=moon-mask></div></button></div></div></section><script src=/js/toggleLogos.js></script><script src=/js/toggleColors.js></script><script src=/js/copyUrl.js></script><section class="section narrow"><section id=articleHero class="section narrow"><div class=article-hero><header class=article-header><h1 class=article-hero-heading>Convert Promises to ReaderTaskEithers</h1><div class=article-hero-subtitle><div class=article-meta><a href=/authors/mohseen-mukaddam/ class=article-author-link><div class=article-author-avatar><img src=/images/mohseen-mukaddam.jpg></div><strong>Mohseen Mukaddam</strong>
<span class=hide-on-mobile>,&nbsp;</span>
</a><script src=/js/collapseAuthors.js></script>December 8, 2021
• 5 min read</div></div></header><div class=article-hero-image id=ArticleImage__Hero><picture><source srcset=/images/hero/convert-promises-to-RTE.jpg media="(min-width: 1280px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 1280px) and (min-resolution: 192dpi)"><source srcset=/images/hero/convert-promises-to-RTE.jpg media="(min-width: 1280px)"><source srcset=/images/hero/convert-promises-to-RTE-tablet.jpg media="(min-width: 735px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 735px) and (min-resolution: 192dpi)"><source srcset=/images/hero/convert-promises-to-RTE-tablet.jpg media="(min-width: 735px)"><source srcset=818x434.jpg media="(min-width: 540px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 540px) and (min-resolution: 192dpi)"><source srcset=/images/hero/convert-promises-to-RTE-tablet.jpg media="(min-width: 540px)"><source srcset=/images/hero/convert-promises-to-RTE-mobile.jpg media="(min-width: 320px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 320px) and (min-resolution: 192dpi)"><source srcset=/images/hero/convert-promises-to-RTE-mobile.jpg media="(min-width: 320px)"><source srcset=/images/hero/convert-promises-to-RTE-mobile.jpg media="(min-width: 0px) and (-webkit-min-device-pixel-ratio: 2), (min-width: 0px) and (min-resolution: 192dpi)"><source srcset=/images/hero/convert-promises-to-RTE-mobile.jpg media="(min-width: 0px)"><img src=/images/hero/convert-promises-to-RTE.jpg alt></picture></div></div></section><aside id=progressBar class=aside-container><div class=aside-align><div><div class=overlap-container></div></div></div><div class=progress-container tabindex={-1}><div class=track-line aria-hidden=true><div id=progressIndicator class=progress-line></div></div></div></aside><article id=articleContent class=post-content style=position:relative><h2 id=making-promises-functional>Making Promises Functional</h2><p>Hey folks, this is a quick overview on how to make promises functional in <span class=highlight-block>fp-ts</span>. If you&rsquo;re new to fp-ts would highly recommend reading the <a href=https://rlee.dev/practical-guide-to-fp-ts-part-1>fp-ts guide</a> to get more familiar with the library. Before we delve into why fp-ts, and why promises are a pain to get port onto fp-ts, wanted to first walk through why functional paradigm is a good option in the first place.</p><p>There is a heavy debate between Functional and OOP for decades with functional being more in vogue lately, but there are true benefits from having well tested and pure
functional code even in the most monolithic of applications.</p><div class=Image__Large><img src=/images/war.jpg alt="alt text for large image"></div><p>Either you click with functional paradigm or you learn to love it, or wage a holy war on all of the online forums. I generally feel having code without side effects, self contained state and
good testablility (ability to write good and easily reproduce tests without a whole lot of mocking) is a good thing. Whether you prefer functional or OOP, I think it&rsquo;s entirely up to you on which to embrace or have a good balance of both if you&rsquo;re language of choice allows it. Functional programming makes it easier to translate mathematical functions in atomic units v/s in OOP style where more code if often used to describe models and how they interact with each other.</p><p>That being said, if you want to add a little spice to you typescript, fp-ts is a great lib to introduce Haskell-like functional programming to your typescript code.</p><h2 id=promises>Promises</h2><p>Great now that you&rsquo;re curious on why fp-ts and know a bit about how it works, let&rsquo;s dive into why promises can be finnicky to get right in fp-ts. The problem isn&rsquo;t with fp-ts or promises, it&rsquo;s in how they&rsquo;re represented in fp-ts v/s JavaScript or TypeScript.</p><p>Let&rsquo;s say you have a function to add some delay using a promise.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>delay</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>ms</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>void</span>&gt; <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Promise</span>((<span style=color:#a6e22e>resolve</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setTimeout</span>(<span style=color:#a6e22e>resolve</span>, <span style=color:#a6e22e>ms</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>This works fine in Node or the browser, but you can&rsquo;t directly use a promise in fp-ts as a <span class=highlight-block>Task</span> (You can, but would need some gimmicky way of setting up a new Task to call a promise). A Task is a function that returns a promise which is expected to never be rejected.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Task</span>&lt;<span style=color:#f92672>A</span>&gt; {
</span></span><span style=display:flex><span>  ()<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>A</span>&gt;;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Which is great but introduces a new problem if we want to chain it with <span class=highlight-block>Eithers</span> or <span class=highlight-block>TaskEithers</span>. Eithers represent a synchronous operation that can success or fail, like
writing some text to a file or reading a value from a JSON object. <span class=highlight-block>TaskEithers</span> are async versions of <span class=highlight-block>Eithers</span> meaning the async operation can either succeed or fail. This
is the most common use case like writing records to a database, reading from cache or making an API request. The problem arises when trying to chain a guaranteed async promises with other impure versions like <span class=highlight-block>Eithers</span> or <span class=highlight-block>TaskEithers</span>.</p><p>In order to do this, we need to convert the promise or Task to the base operation type you&rsquo;re using in fp-ts. So you would need to convert a Promise to a Task then to a <span class=highlight-block>TaskEither</span> or <span class=highlight-block>ReaderTaskEither</span> to make it all flow correctly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>delayTE</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>duration</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>TaskEither</span>&lt;<span style=color:#f92672>Error</span>, <span style=color:#a6e22e>void</span>&gt; <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>TE</span>.<span style=color:#a6e22e>tryCatch</span>(
</span></span><span style=display:flex><span>    () <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>delay</span>(<span style=color:#a6e22e>duration</span>),
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>e</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;Should never get called&#34;</span>)
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>delayRTE</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>duration</span>: <span style=color:#66d9ef>number</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>ReaderTaskEither</span>&lt;<span style=color:#f92672>Record</span>&lt;<span style=color:#f92672>string</span>, <span style=color:#a6e22e>string</span>&gt;, <span style=color:#a6e22e>Error</span>, <span style=color:#a6e22e>void</span>&gt; <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>context</span>: <span style=color:#66d9ef>Record</span>&lt;<span style=color:#f92672>string</span>, <span style=color:#a6e22e>string</span>&gt;) <span style=color:#f92672>=&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>delayTE</span>(<span style=color:#a6e22e>duration</span>);
</span></span></code></pre></div><p>Doing so does add some impurity to the once pure <span class=highlight-block>Task</span>, but it&rsquo;s not any less impure than it once was, this is pretty common in Functional languages to call pure functions
from impure ones, and one of the main gotchas for me when trying to write functional code. <span class=highlight-block>ReaderTaskEither</span> is a special use case for <span class=highlight-block>TaskEithers</span> in which a context can be passed to
other chained operations making it easier to share the new state with other functions. (<em>You can also do this with <span class=highlight-block>TaskEithers</span> but would involve having a separate argument for each part of state you need.</em>)</p><p>Great once, we have all of this together now let&rsquo;s using our delay function in a fp-ts call.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>/* This function will finish after 10 seconds */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>asyncOperation</span> <span style=color:#f92672>=</span> ()<span style=color:#f92672>:</span> <span style=color:#a6e22e>ReaderTaskEither</span><span style=color:#f92672>&lt;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Record</span>&lt;<span style=color:#f92672>string</span>, <span style=color:#a6e22e>string</span>&gt;,
</span></span><span style=display:flex><span>  Error,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>void</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>pipe</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sequenceT</span>(<span style=color:#a6e22e>RTE</span>.<span style=color:#a6e22e>readerTaskEither</span>)([
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delayRTE</span>(<span style=color:#ae81ff>1000</span>),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delayRTE</span>(<span style=color:#ae81ff>2000</span>),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delayRTE</span>(<span style=color:#ae81ff>3000</span>),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delayRTE</span>(<span style=color:#ae81ff>4000</span>),
</span></span><span style=display:flex><span>    ])
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Note: how we represent delays as a <span class=highlight-block>ReaderTaskEither</span>, this might make you think that it can throw an Error, but it&rsquo;s actually won&rsquo;t ever throw an error and will wait until the initial promise is completed.</p><p>Another interesting part of fp-ts is that <span class=highlight-block>pipe</span> let&rsquo;s you descibe how the data should be fetched/modified and finally prepared, but these functions are not run sequentially, they are run in async if possible. In order to partially make it synchronous, we can use <span class=highlight-block>SequenceT</span> to chain them in the order we want them to run. So the final async operation will finish after 10 seconds.</p><p>Awesome, now if you want to convert an <span class=highlight-block>ReaderTaskEither</span> back to a <span class=highlight-block>Promise</span> and make a call you would need to setup a <span class=highlight-block>pipe</span> to chain and prepare your function call.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fn</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>pipe</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sequenceT</span>(<span style=color:#a6e22e>RTE</span>.<span style=color:#a6e22e>readerTaskEither</span>)([
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delayRTE</span>(<span style=color:#ae81ff>1000</span>),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delayRTE</span>(<span style=color:#ae81ff>2000</span>),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delayRTE</span>(<span style=color:#ae81ff>3000</span>),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>delayRTE</span>(<span style=color:#ae81ff>4000</span>),
</span></span><span style=display:flex><span>    ]),
</span></span><span style=display:flex><span>    <span style=color:#75715e>/* This could be chained, folded or mapped to get a final value in the promise */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>RTE</span>.<span style=color:#a6e22e>map</span>(() <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Completed!&#34;</span>))
</span></span><span style=display:flex><span>  )({ <span style=color:#a6e22e>context</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;some value&#34;</span> })();
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* Logs &#34;Completed!&#34; after 10 seconds */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fn</span>();
</span></span></code></pre></div><p>Sweet, hopefully this helps in understanding how fp-ts works and how to convert native Promises to fp-ts types. Hope you enjoyed it and want to give fp-ts a spin and start using it for your core features to be well composed and tested.</p><section id=subscriptionSection class="section narrow"><div class=subscription-container><div class=subscription-content><h3 class=subscription-heading>Join the email list and get notified about new content</h3><p class=subscription-text>Be the first to receive latest content with the ability to opt-out at
anytime.<br>We promise to not spam your inbox or share your email with any third
parties.</p><form id=subscriptionForm class=subscription-form action=https://formspree.io/f/mpzbwzjr method=POST><input id=emailInput class=subscription-input placeholder=your@email.com name=email type=email required pattern="^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$">
<button id=submitButton class=submit-button type=submit>
Subscribe</button><div class=subscription-error-message>The email you entered is not valid.</div></form></div></div></section><script src=/js/addFormStyles.js></script></article><section id=articleNext class="section nartrow"><h3 class=footer-next-heading>More articles from Mohseen</h3><div class=footer-spacer></div><div class=next-articles-grid numberofarticles={numberOfArticles}><div class=post-row><a href=/post/2021-11-30-enabling-airflow-api/ class=article-link id=article-link-bigger><div><div class=image-container><img src=/images/hero/enabling-airflow-api.jpg class=article-image></div><div><h2 class=article-title>Enabling Airflow API</h2><p class=article-excerpt>Enable Airflow API to automate any task or script.</p><div class=article-metadata>November 30, 2021 · 3 min read</div></div></div></a><a href=/post/2021-11-17-airflow-cron-on-steroids/ class=article-link><div><div class=image-container><img src=/images/hero/airflow-cron-on-steroids.jpg class=article-image></div><div><h2 class=article-title>Airflow Cron on Steroids</h2><p class=article-excerpt>Using Apache Airflow to replace CRON tasks.</p><div class=article-metadata>November 17, 2021 · 7 min read</div></div></div></a></div></div></section></section><script src=/js/progressBar.js></script><div class=footer-gradient></div><div class="section narrow"><div class=footer-hr></div><div class=footer-container><div class=footer-text>© 2025 Mohseen</div><div class=social-icon-outer><div class=social-icon-container></div></div></div></div></div><script src=/js/prism.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-WBJ981VMT6"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WBJ981VMT6")}</script></body></html>